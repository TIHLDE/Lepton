notifications:
  email: false

language: python

# safelist
branches:
  only:
  - master
  - Ops
  - dev

python:
  - "3.6"

#Adding services
services: 
  - mysql

#Init envs
env:
  - DJANGO=2.1.7 
  - DB=mysql

#Installing the pipenv and using it to install via pipfile
install:
  - pip install pipenv
  - pipenv install

# Create DB
before_script:
  - mysql -e 'create database test;' -u root

# Running unit tests
script: 
  - ./manage.py test


#script: # => 7
#  - coverage run --source='.' manage.py test

#after_script:
#  - codecov


#services: 
#  - docker 

# command to install docker-compose
#before_script:
#  - pip install docker-compose

# command to run tests
#script:
#  - docker-compose run app sh -c "coverage run --source='.' manage.py test"